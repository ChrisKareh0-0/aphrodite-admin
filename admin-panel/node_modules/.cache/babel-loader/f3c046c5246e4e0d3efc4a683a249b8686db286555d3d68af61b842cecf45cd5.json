{"ast":null,"code":"import React from'react';import{Link}from'react-router-dom';import{useQuery,useMutation,useQueryClient}from'react-query';import{api}from'../services/api';import toast from'react-hot-toast';import{Plus,Edit,Trash2,Eye,EyeOff}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Categories=()=>{var _data$data;const queryClient=useQueryClient();const{data,isLoading}=useQuery('categories',api.categories.getAll);const deleteMutation=useMutation(api.categories.delete,{onSuccess:()=>{queryClient.invalidateQueries('categories');toast.success('Category deleted successfully');},onError:error=>{var _error$response,_error$response$data;toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Failed to delete category');}});const toggleStatusMutation=useMutation(api.categories.toggleStatus,{onSuccess:()=>{queryClient.invalidateQueries('categories');toast.success('Category status updated');},onError:error=>{var _error$response2,_error$response2$data;toast.error(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||'Failed to update status');}});const categories=(data===null||data===void 0?void 0:(_data$data=data.data)===null||_data$data===void 0?void 0:_data$data.categories)||[];const handleDelete=async(id,name)=>{if(window.confirm(\"Are you sure you want to delete \\\"\".concat(name,\"\\\"?\"))){deleteMutation.mutate(id);}};const handleToggleStatus=id=>{toggleStatusMutation.mutate(id);};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Categories\"}),/*#__PURE__*/_jsxs(Link,{to:\"/categories/new\",className:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\",children:[/*#__PURE__*/_jsx(Plus,{className:\"h-4 w-4 mr-2\"}),\"New Category\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow overflow-hidden sm:rounded-md\",children:categories.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"No categories\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"Get started by creating a new category.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsxs(Link,{to:\"/categories/new\",className:\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700\",children:[/*#__PURE__*/_jsx(Plus,{className:\"h-4 w-4 mr-2\"}),\"New Category\"]})})]}):/*#__PURE__*/_jsx(\"ul\",{className:\"divide-y divide-gray-200\",children:categories.map(category=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-4 flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[category.image?/*#__PURE__*/_jsx(\"img\",{className:\"h-10 w-10 rounded object-cover\",src:category.image,alt:category.name}):/*#__PURE__*/_jsx(\"div\",{className:\"h-10 w-10 rounded bg-gray-200 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400 text-sm\",children:category.name.charAt(0)})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-medium text-gray-900\",children:category.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:category.description})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex px-2 py-1 text-xs font-semibold rounded-full \".concat(category.isActive?'bg-green-100 text-green-800':'bg-red-100 text-red-800'),children:category.isActive?'Active':'Inactive'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleToggleStatus(category._id),className:\"text-gray-400 hover:text-gray-500\",title:category.isActive?'Deactivate':'Activate',children:category.isActive?/*#__PURE__*/_jsx(EyeOff,{className:\"h-4 w-4\"}):/*#__PURE__*/_jsx(Eye,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(Link,{to:\"/categories/\".concat(category._id,\"/edit\"),className:\"text-indigo-600 hover:text-indigo-900\",title:\"Edit\",children:/*#__PURE__*/_jsx(Edit,{className:\"h-4 w-4\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(category._id,category.name),className:\"text-red-600 hover:text-red-900\",title:\"Delete\",disabled:deleteMutation.isLoading,children:/*#__PURE__*/_jsx(Trash2,{className:\"h-4 w-4\"})})]})]})},category._id))})})]});};export default Categories;","map":{"version":3,"names":["React","Link","useQuery","useMutation","useQueryClient","api","toast","Plus","Edit","Trash2","Eye","EyeOff","jsx","_jsx","jsxs","_jsxs","Categories","_data$data","queryClient","data","isLoading","categories","getAll","deleteMutation","delete","onSuccess","invalidateQueries","success","onError","error","_error$response","_error$response$data","response","toggleStatusMutation","toggleStatus","_error$response2","_error$response2$data","handleDelete","id","name","window","confirm","concat","mutate","handleToggleStatus","className","children","to","length","map","category","image","src","alt","charAt","description","isActive","onClick","_id","title","disabled"],"sources":["/Users/chris/dev/NextGem/aphrodite-separated/aphrodite-backend/admin-panel/src/pages/Categories.js"],"sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\nimport { api } from '../services/api';\nimport toast from 'react-hot-toast';\nimport { Plus, Edit, Trash2, Eye, EyeOff } from 'lucide-react';\n\nconst Categories = () => {\n  const queryClient = useQueryClient();\n  const { data, isLoading } = useQuery('categories', api.categories.getAll);\n\n  const deleteMutation = useMutation(api.categories.delete, {\n    onSuccess: () => {\n      queryClient.invalidateQueries('categories');\n      toast.success('Category deleted successfully');\n    },\n    onError: (error) => {\n      toast.error(error.response?.data?.error || 'Failed to delete category');\n    },\n  });\n\n  const toggleStatusMutation = useMutation(api.categories.toggleStatus, {\n    onSuccess: () => {\n      queryClient.invalidateQueries('categories');\n      toast.success('Category status updated');\n    },\n    onError: (error) => {\n      toast.error(error.response?.data?.error || 'Failed to update status');\n    },\n  });\n\n  const categories = data?.data?.categories || [];\n\n  const handleDelete = async (id, name) => {\n    if (window.confirm(`Are you sure you want to delete \"${name}\"?`)) {\n      deleteMutation.mutate(id);\n    }\n  };\n\n  const handleToggleStatus = (id) => {\n    toggleStatusMutation.mutate(id);\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">Categories</h1>\n        <Link\n          to=\"/categories/new\"\n          className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n        >\n          <Plus className=\"h-4 w-4 mr-2\" />\n          New Category\n        </Link>\n      </div>\n\n      <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\n        {categories.length === 0 ? (\n          <div className=\"p-6 text-center\">\n            <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No categories</h3>\n            <p className=\"mt-1 text-sm text-gray-500\">\n              Get started by creating a new category.\n            </p>\n            <div className=\"mt-6\">\n              <Link\n                to=\"/categories/new\"\n                className=\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700\"\n              >\n                <Plus className=\"h-4 w-4 mr-2\" />\n                New Category\n              </Link>\n            </div>\n          </div>\n        ) : (\n          <ul className=\"divide-y divide-gray-200\">\n            {categories.map((category) => (\n              <li key={category._id}>\n                <div className=\"px-4 py-4 flex items-center justify-between\">\n                  <div className=\"flex items-center\">\n                    {category.image ? (\n                      <img\n                        className=\"h-10 w-10 rounded object-cover\"\n                        src={category.image}\n                        alt={category.name}\n                      />\n                    ) : (\n                      <div className=\"h-10 w-10 rounded bg-gray-200 flex items-center justify-center\">\n                        <span className=\"text-gray-400 text-sm\">{category.name.charAt(0)}</span>\n                      </div>\n                    )}\n                    <div className=\"ml-4\">\n                      <h3 className=\"text-sm font-medium text-gray-900\">\n                        {category.name}\n                      </h3>\n                      <p className=\"text-sm text-gray-500\">{category.description}</p>\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-center space-x-2\">\n                    <span\n                      className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n                        category.isActive\n                          ? 'bg-green-100 text-green-800'\n                          : 'bg-red-100 text-red-800'\n                      }`}\n                    >\n                      {category.isActive ? 'Active' : 'Inactive'}\n                    </span>\n\n                    <button\n                      onClick={() => handleToggleStatus(category._id)}\n                      className=\"text-gray-400 hover:text-gray-500\"\n                      title={category.isActive ? 'Deactivate' : 'Activate'}\n                    >\n                      {category.isActive ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\n                    </button>\n\n                    <Link\n                      to={`/categories/${category._id}/edit`}\n                      className=\"text-indigo-600 hover:text-indigo-900\"\n                      title=\"Edit\"\n                    >\n                      <Edit className=\"h-4 w-4\" />\n                    </Link>\n\n                    <button\n                      onClick={() => handleDelete(category._id, category.name)}\n                      className=\"text-red-600 hover:text-red-900\"\n                      title=\"Delete\"\n                      disabled={deleteMutation.isLoading}\n                    >\n                      <Trash2 className=\"h-4 w-4\" />\n                    </button>\n                  </div>\n                </div>\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Categories;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}