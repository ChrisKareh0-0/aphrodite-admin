{"ast":null,"code":"import axios from'axios';const API_URL=process.env.REACT_APP_API_URL||'http://localhost:3001/api';const apiClient=axios.create({baseURL:API_URL,headers:{'Content-Type':'application/json'}});// Request interceptor to add auth token\napiClient.interceptors.request.use(config=>{const token=localStorage.getItem('token');if(token){config.headers.Authorization=\"Bearer \".concat(token);}return config;});// Response interceptor to handle errors\napiClient.interceptors.response.use(response=>response,error=>{var _error$response;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){localStorage.removeItem('token');window.location.href='/admin/login';}return Promise.reject(error);});export const api={setToken:token=>{if(token){apiClient.defaults.headers.Authorization=\"Bearer \".concat(token);}else{delete apiClient.defaults.headers.Authorization;}},// Auth endpoints\nauth:{login:credentials=>apiClient.post('/auth/login',credentials),me:()=>apiClient.get('/auth/me'),updateProfile:data=>apiClient.put('/auth/profile',data),changePassword:data=>apiClient.put('/auth/password',data)},// Categories endpoints\ncategories:{getAll:()=>apiClient.get('/categories'),getById:id=>apiClient.get(\"/categories/\".concat(id)),create:data=>{const formData=new FormData();Object.keys(data).forEach(key=>{if(data[key]!==null&&data[key]!==undefined){formData.append(key,data[key]);}});return apiClient.post('/categories',formData,{headers:{'Content-Type':'multipart/form-data'}});},update:(id,data)=>{const formData=new FormData();Object.keys(data).forEach(key=>{if(data[key]!==null&&data[key]!==undefined){formData.append(key,data[key]);}});return apiClient.put(\"/categories/\".concat(id),formData,{headers:{'Content-Type':'multipart/form-data'}});},delete:id=>apiClient.delete(\"/categories/\".concat(id)),toggleStatus:id=>apiClient.put(\"/categories/\".concat(id,\"/toggle-status\"))},// Products endpoints\nproducts:{getAll:params=>apiClient.get('/products',{params}),getById:id=>apiClient.get(\"/products/\".concat(id)),create:data=>{const formData=new FormData();// Handle regular fields\nObject.keys(data).forEach(key=>{if(key!=='images'&&data[key]!==null&&data[key]!==undefined){if(typeof data[key]==='object'){formData.append(key,JSON.stringify(data[key]));}else{formData.append(key,data[key]);}}});// Handle images\nif(data.images&&data.images.length>0){data.images.forEach(image=>{formData.append('images',image);});}return apiClient.post('/products',formData,{headers:{'Content-Type':'multipart/form-data'}});},update:(id,data)=>{const formData=new FormData();// Handle regular fields\nObject.keys(data).forEach(key=>{if(key!=='images'&&data[key]!==null&&data[key]!==undefined){if(typeof data[key]==='object'){formData.append(key,JSON.stringify(data[key]));}else{formData.append(key,data[key]);}}});// Handle new images\nif(data.images&&data.images.length>0){data.images.forEach(image=>{formData.append('images',image);});}return apiClient.put(\"/products/\".concat(id),formData,{headers:{'Content-Type':'multipart/form-data'}});},delete:id=>apiClient.delete(\"/products/\".concat(id)),toggleStatus:id=>apiClient.put(\"/products/\".concat(id,\"/toggle-status\")),removeImage:(id,imageIndex)=>apiClient.delete(\"/products/\".concat(id,\"/images/\").concat(imageIndex))},// Public endpoints (for testing)\npublic:{getCategories:()=>apiClient.get('/public/categories'),getProducts:params=>apiClient.get('/public/products',{params}),getProduct:slug=>apiClient.get(\"/public/products/\".concat(slug)),getFeatured:params=>apiClient.get('/public/featured',{params}),getStats:()=>apiClient.get('/public/stats')}};export default apiClient;","map":{"version":3,"names":["axios","API_URL","process","env","REACT_APP_API_URL","apiClient","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","concat","response","error","_error$response","status","removeItem","window","location","href","Promise","reject","api","setToken","defaults","auth","login","credentials","post","me","get","updateProfile","data","put","changePassword","categories","getAll","getById","id","formData","FormData","Object","keys","forEach","key","undefined","append","update","delete","toggleStatus","products","params","JSON","stringify","images","length","image","removeImage","imageIndex","public","getCategories","getProducts","getProduct","slug","getFeatured","getStats"],"sources":["/Users/chris/dev/NextGem/aphrodite_v3/aphrodite-backend/admin-panel/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/api';\n\nconst apiClient = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Request interceptor to add auth token\napiClient.interceptors.request.use((config) => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// Response interceptor to handle errors\napiClient.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response?.status === 401) {\n      localStorage.removeItem('token');\n      window.location.href = '/admin/login';\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport const api = {\n  setToken: (token) => {\n    if (token) {\n      apiClient.defaults.headers.Authorization = `Bearer ${token}`;\n    } else {\n      delete apiClient.defaults.headers.Authorization;\n    }\n  },\n\n  // Auth endpoints\n  auth: {\n    login: (credentials) => apiClient.post('/auth/login', credentials),\n    me: () => apiClient.get('/auth/me'),\n    updateProfile: (data) => apiClient.put('/auth/profile', data),\n    changePassword: (data) => apiClient.put('/auth/password', data),\n  },\n\n  // Categories endpoints\n  categories: {\n    getAll: () => apiClient.get('/categories'),\n    getById: (id) => apiClient.get(`/categories/${id}`),\n    create: (data) => {\n      const formData = new FormData();\n      Object.keys(data).forEach(key => {\n        if (data[key] !== null && data[key] !== undefined) {\n          formData.append(key, data[key]);\n        }\n      });\n      return apiClient.post('/categories', formData, {\n        headers: { 'Content-Type': 'multipart/form-data' }\n      });\n    },\n    update: (id, data) => {\n      const formData = new FormData();\n      Object.keys(data).forEach(key => {\n        if (data[key] !== null && data[key] !== undefined) {\n          formData.append(key, data[key]);\n        }\n      });\n      return apiClient.put(`/categories/${id}`, formData, {\n        headers: { 'Content-Type': 'multipart/form-data' }\n      });\n    },\n    delete: (id) => apiClient.delete(`/categories/${id}`),\n    toggleStatus: (id) => apiClient.put(`/categories/${id}/toggle-status`),\n  },\n\n  // Products endpoints\n  products: {\n    getAll: (params) => apiClient.get('/products', { params }),\n    getById: (id) => apiClient.get(`/products/${id}`),\n    create: (data) => {\n      const formData = new FormData();\n\n      // Handle regular fields\n      Object.keys(data).forEach(key => {\n        if (key !== 'images' && data[key] !== null && data[key] !== undefined) {\n          if (typeof data[key] === 'object') {\n            formData.append(key, JSON.stringify(data[key]));\n          } else {\n            formData.append(key, data[key]);\n          }\n        }\n      });\n\n      // Handle images\n      if (data.images && data.images.length > 0) {\n        data.images.forEach(image => {\n          formData.append('images', image);\n        });\n      }\n\n      return apiClient.post('/products', formData, {\n        headers: { 'Content-Type': 'multipart/form-data' }\n      });\n    },\n    update: (id, data) => {\n      const formData = new FormData();\n\n      // Handle regular fields\n      Object.keys(data).forEach(key => {\n        if (key !== 'images' && data[key] !== null && data[key] !== undefined) {\n          if (typeof data[key] === 'object') {\n            formData.append(key, JSON.stringify(data[key]));\n          } else {\n            formData.append(key, data[key]);\n          }\n        }\n      });\n\n      // Handle new images\n      if (data.images && data.images.length > 0) {\n        data.images.forEach(image => {\n          formData.append('images', image);\n        });\n      }\n\n      return apiClient.put(`/products/${id}`, formData, {\n        headers: { 'Content-Type': 'multipart/form-data' }\n      });\n    },\n    delete: (id) => apiClient.delete(`/products/${id}`),\n    toggleStatus: (id) => apiClient.put(`/products/${id}/toggle-status`),\n    removeImage: (id, imageIndex) => apiClient.delete(`/products/${id}/images/${imageIndex}`),\n  },\n\n  // Public endpoints (for testing)\n  public: {\n    getCategories: () => apiClient.get('/public/categories'),\n    getProducts: (params) => apiClient.get('/public/products', { params }),\n    getProduct: (slug) => apiClient.get(`/public/products/${slug}`),\n    getFeatured: (params) => apiClient.get('/public/featured', { params }),\n    getStats: () => apiClient.get('/public/stats'),\n  },\n};\n\nexport default apiClient;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}