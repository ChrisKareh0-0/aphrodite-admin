{"ast":null,"code":"import React,{useState}from'react';import{useQuery,useMutation,useQueryClient}from'react-query';import{Upload,Trash2,Image}from'lucide-react';import{api}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const HeroManager=()=>{const[selectedFile,setSelectedFile]=useState(null);const queryClient=useQueryClient();const{data:heroData,isLoading}=useQuery('hero',()=>api.settings.getHero());const uploadMutation=useMutation(formData=>api.settings.updateHero(formData),{onSuccess:()=>{queryClient.invalidateQueries('hero');setSelectedFile(null);}});const handleFileChange=event=>{const file=event.target.files[0];if(file){setSelectedFile(file);const formData=new FormData();formData.append('hero',file);uploadMutation.mutate(formData);}};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 sm:px-6 lg:px-8 py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sm:flex sm:items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"sm:flex-auto\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-semibold text-gray-900\",children:\"Hero Image\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-sm text-gray-700\",children:\"Manage the hero image shown on the storefront homepage\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Current Hero Image\"}),/*#__PURE__*/_jsx(\"div\",{className:\"relative\",children:heroData!==null&&heroData!==void 0&&heroData.imageUrl?/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:heroData.imageUrl,alt:\"Hero\",className:\"w-full h-64 object-cover rounded-lg\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>uploadMutation.mutate({imageUrl:null}),className:\"absolute top-2 right-2 p-2 bg-red-100 rounded-full hover:bg-red-200 transition-colors\",children:/*#__PURE__*/_jsx(Trash2,{className:\"h-5 w-5 text-red-600\"})})]}):/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-64 bg-gray-100 rounded-lg flex items-center justify-center\",children:/*#__PURE__*/_jsx(Image,{className:\"h-12 w-12 text-gray-400\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Upload New Image\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center w-full\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center pt-5 pb-6\",children:[/*#__PURE__*/_jsx(Upload,{className:\"w-8 h-8 mb-3 text-gray-400\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-2 text-sm text-gray-500\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:\"Click to upload\"}),\" or drag and drop\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"PNG, JPG or WebP (Recommended: 1920x1080)\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"hidden\",accept:\"image/*\",onChange:handleFileChange,disabled:uploadMutation.isLoading})]})}),uploadMutation.isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 text-center text-sm text-gray-500\",children:\"Uploading image...\"})]})]})]});};export default HeroManager;","map":{"version":3,"names":["React","useState","useQuery","useMutation","useQueryClient","Upload","Trash2","Image","api","jsx","_jsx","jsxs","_jsxs","HeroManager","selectedFile","setSelectedFile","queryClient","data","heroData","isLoading","settings","getHero","uploadMutation","formData","updateHero","onSuccess","invalidateQueries","handleFileChange","event","file","target","files","FormData","append","mutate","className","children","imageUrl","src","alt","onClick","type","accept","onChange","disabled"],"sources":["/Users/chris/dev/NextGem/aphrodite-separated/aphrodite-backend/admin-panel/src/pages/HeroManager.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\nimport { Upload, Trash2, Image } from 'lucide-react';\nimport { api } from '../services/api';\n\nconst HeroManager = () => {\n  const [selectedFile, setSelectedFile] = useState(null);\n  const queryClient = useQueryClient();\n\n  const { data: heroData, isLoading } = useQuery('hero', () => api.settings.getHero());\n\n  const uploadMutation = useMutation(\n    (formData) => api.settings.updateHero(formData),\n    {\n      onSuccess: () => {\n        queryClient.invalidateQueries('hero');\n        setSelectedFile(null);\n      },\n    }\n  );\n\n  const handleFileChange = (event) => {\n    const file = event.target.files[0];\n    if (file) {\n      setSelectedFile(file);\n      const formData = new FormData();\n      formData.append('hero', file);\n      uploadMutation.mutate(formData);\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"px-4 sm:px-6 lg:px-8 py-8\">\n      <div className=\"sm:flex sm:items-center\">\n        <div className=\"sm:flex-auto\">\n          <h1 className=\"text-2xl font-semibold text-gray-900\">Hero Image</h1>\n          <p className=\"mt-2 text-sm text-gray-700\">\n            Manage the hero image shown on the storefront homepage\n          </p>\n        </div>\n      </div>\n\n      <div className=\"mt-8\">\n        {/* Current Hero Image */}\n        <div className=\"mb-6\">\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Current Hero Image</h3>\n          <div className=\"relative\">\n            {heroData?.imageUrl ? (\n              <div className=\"relative\">\n                <img\n                  src={heroData.imageUrl}\n                  alt=\"Hero\"\n                  className=\"w-full h-64 object-cover rounded-lg\"\n                />\n                <button\n                  onClick={() => uploadMutation.mutate({ imageUrl: null })}\n                  className=\"absolute top-2 right-2 p-2 bg-red-100 rounded-full hover:bg-red-200 transition-colors\"\n                >\n                  <Trash2 className=\"h-5 w-5 text-red-600\" />\n                </button>\n              </div>\n            ) : (\n              <div className=\"w-full h-64 bg-gray-100 rounded-lg flex items-center justify-center\">\n                <Image className=\"h-12 w-12 text-gray-400\" />\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Upload New Image */}\n        <div>\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Upload New Image</h3>\n          <div className=\"flex items-center justify-center w-full\">\n            <label className=\"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100\">\n              <div className=\"flex flex-col items-center justify-center pt-5 pb-6\">\n                <Upload className=\"w-8 h-8 mb-3 text-gray-400\" />\n                <p className=\"mb-2 text-sm text-gray-500\">\n                  <span className=\"font-semibold\">Click to upload</span> or drag and drop\n                </p>\n                <p className=\"text-xs text-gray-500\">PNG, JPG or WebP (Recommended: 1920x1080)</p>\n              </div>\n              <input\n                type=\"file\"\n                className=\"hidden\"\n                accept=\"image/*\"\n                onChange={handleFileChange}\n                disabled={uploadMutation.isLoading}\n              />\n            </label>\n          </div>\n          {uploadMutation.isLoading && (\n            <div className=\"mt-4 text-center text-sm text-gray-500\">\n              Uploading image...\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default HeroManager;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}