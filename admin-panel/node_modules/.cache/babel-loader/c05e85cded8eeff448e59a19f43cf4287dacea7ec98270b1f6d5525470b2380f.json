{"ast":null,"code":"import axios from 'axios';\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/api';\nconst apiClient = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Request interceptor to add auth token\napiClient.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// Response interceptor to handle errors\napiClient.interceptors.response.use(response => response, error => {\n  var _error$response, _error$response2;\n  console.error('API Error:', (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n  if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 401) {\n    localStorage.removeItem('token');\n    window.location.href = '/admin/login';\n  }\n  return Promise.reject(error);\n});\nexport const api = {\n  setToken: token => {\n    if (token) {\n      apiClient.defaults.headers.Authorization = `Bearer ${token}`;\n    } else {\n      delete apiClient.defaults.headers.Authorization;\n    }\n  },\n  // Auth endpoints\n  auth: {\n    login: credentials => apiClient.post('/auth/login', credentials),\n    me: () => apiClient.get('/auth/me'),\n    updateProfile: data => apiClient.put('/auth/profile', data),\n    changePassword: data => apiClient.put('/auth/password', data)\n  },\n  // Categories endpoints\n  categories: {\n    getAll: () => apiClient.get('/categories'),\n    getById: id => apiClient.get(`/categories/${id}`),\n    create: data => {\n      const formData = new FormData();\n      Object.keys(data).forEach(key => {\n        if (data[key] !== null && data[key] !== undefined) {\n          formData.append(key, data[key]);\n        }\n      });\n      return apiClient.post('/categories', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n    },\n    update: (id, data) => {\n      const formData = new FormData();\n      Object.keys(data).forEach(key => {\n        if (data[key] !== null && data[key] !== undefined) {\n          formData.append(key, data[key]);\n        }\n      });\n      return apiClient.put(`/categories/${id}`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n    },\n    delete: id => apiClient.delete(`/categories/${id}`),\n    toggleStatus: id => apiClient.put(`/categories/${id}/toggle-status`)\n  },\n  // Products endpoints\n  products: {\n    getAll: params => apiClient.get('/products', {\n      params\n    }),\n    getById: id => apiClient.get(`/products/${id}`),\n    create: data => {\n      const formData = new FormData();\n\n      // Handle regular fields\n      Object.keys(data).forEach(key => {\n        if (key !== 'images' && data[key] !== null && data[key] !== undefined) {\n          if (typeof data[key] === 'object') {\n            formData.append(key, JSON.stringify(data[key]));\n          } else {\n            formData.append(key, data[key]);\n          }\n        }\n      });\n\n      // Handle images\n      if (data.images && data.images.length > 0) {\n        data.images.forEach(image => {\n          formData.append('images', image);\n        });\n      }\n      return apiClient.post('/products', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n    },\n    update: (id, data) => {\n      const formData = new FormData();\n\n      // Handle regular fields\n      Object.keys(data).forEach(key => {\n        if (key !== 'images' && data[key] !== null && data[key] !== undefined) {\n          if (typeof data[key] === 'object') {\n            formData.append(key, JSON.stringify(data[key]));\n          } else {\n            formData.append(key, data[key]);\n          }\n        }\n      });\n\n      // Handle new images\n      if (data.images && data.images.length > 0) {\n        data.images.forEach(image => {\n          formData.append('images', image);\n        });\n      }\n      return apiClient.put(`/products/${id}`, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n    },\n    delete: id => apiClient.delete(`/products/${id}`),\n    toggleStatus: id => apiClient.put(`/products/${id}/toggle-status`),\n    removeImage: (id, imageIndex) => apiClient.delete(`/products/${id}/images/${imageIndex}`)\n  },\n  // Public endpoints (for testing)\n  public: {\n    getCategories: () => apiClient.get('/public/categories'),\n    getProducts: params => apiClient.get('/public/products', {\n      params\n    }),\n    getProduct: slug => apiClient.get(`/public/products/${slug}`),\n    getFeatured: params => apiClient.get('/public/featured', {\n      params\n    }),\n    getStats: () => apiClient.get('/public/stats')\n  }\n};\nexport default apiClient;","map":{"version":3,"names":["axios","API_URL","process","env","REACT_APP_API_URL","apiClient","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","response","error","_error$response","_error$response2","console","data","status","removeItem","window","location","href","Promise","reject","api","setToken","defaults","auth","login","credentials","post","me","get","updateProfile","put","changePassword","categories","getAll","getById","id","formData","FormData","Object","keys","forEach","key","undefined","append","update","delete","toggleStatus","products","params","JSON","stringify","images","length","image","removeImage","imageIndex","public","getCategories","getProducts","getProduct","slug","getFeatured","getStats"],"sources":["/Users/chris/dev/NextGem/aphrodite_v3/aphrodite-backend/admin-panel/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/api';\n\nconst apiClient = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Request interceptor to add auth token\napiClient.interceptors.request.use((config) => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// Response interceptor to handle errors\napiClient.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    console.error('API Error:', error.response?.data);\n    if (error.response?.status === 401) {\n      localStorage.removeItem('token');\n      window.location.href = '/admin/login';\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport const api = {\n  setToken: (token) => {\n    if (token) {\n      apiClient.defaults.headers.Authorization = `Bearer ${token}`;\n    } else {\n      delete apiClient.defaults.headers.Authorization;\n    }\n  },\n\n  // Auth endpoints\n  auth: {\n    login: (credentials) => apiClient.post('/auth/login', credentials),\n    me: () => apiClient.get('/auth/me'),\n    updateProfile: (data) => apiClient.put('/auth/profile', data),\n    changePassword: (data) => apiClient.put('/auth/password', data),\n  },\n\n  // Categories endpoints\n  categories: {\n    getAll: () => apiClient.get('/categories'),\n    getById: (id) => apiClient.get(`/categories/${id}`),\n    create: (data) => {\n      const formData = new FormData();\n      Object.keys(data).forEach(key => {\n        if (data[key] !== null && data[key] !== undefined) {\n          formData.append(key, data[key]);\n        }\n      });\n      return apiClient.post('/categories', formData, {\n        headers: { 'Content-Type': 'multipart/form-data' }\n      });\n    },\n    update: (id, data) => {\n      const formData = new FormData();\n      Object.keys(data).forEach(key => {\n        if (data[key] !== null && data[key] !== undefined) {\n          formData.append(key, data[key]);\n        }\n      });\n      return apiClient.put(`/categories/${id}`, formData, {\n        headers: { 'Content-Type': 'multipart/form-data' }\n      });\n    },\n    delete: (id) => apiClient.delete(`/categories/${id}`),\n    toggleStatus: (id) => apiClient.put(`/categories/${id}/toggle-status`),\n  },\n\n  // Products endpoints\n  products: {\n    getAll: (params) => apiClient.get('/products', { params }),\n    getById: (id) => apiClient.get(`/products/${id}`),\n    create: (data) => {\n      const formData = new FormData();\n\n      // Handle regular fields\n      Object.keys(data).forEach(key => {\n        if (key !== 'images' && data[key] !== null && data[key] !== undefined) {\n          if (typeof data[key] === 'object') {\n            formData.append(key, JSON.stringify(data[key]));\n          } else {\n            formData.append(key, data[key]);\n          }\n        }\n      });\n\n      // Handle images\n      if (data.images && data.images.length > 0) {\n        data.images.forEach(image => {\n          formData.append('images', image);\n        });\n      }\n\n      return apiClient.post('/products', formData, {\n        headers: { 'Content-Type': 'multipart/form-data' }\n      });\n    },\n    update: (id, data) => {\n      const formData = new FormData();\n\n      // Handle regular fields\n      Object.keys(data).forEach(key => {\n        if (key !== 'images' && data[key] !== null && data[key] !== undefined) {\n          if (typeof data[key] === 'object') {\n            formData.append(key, JSON.stringify(data[key]));\n          } else {\n            formData.append(key, data[key]);\n          }\n        }\n      });\n\n      // Handle new images\n      if (data.images && data.images.length > 0) {\n        data.images.forEach(image => {\n          formData.append('images', image);\n        });\n      }\n\n      return apiClient.put(`/products/${id}`, formData, {\n        headers: { 'Content-Type': 'multipart/form-data' }\n      });\n    },\n    delete: (id) => apiClient.delete(`/products/${id}`),\n    toggleStatus: (id) => apiClient.put(`/products/${id}/toggle-status`),\n    removeImage: (id, imageIndex) => apiClient.delete(`/products/${id}/images/${imageIndex}`),\n  },\n\n  // Public endpoints (for testing)\n  public: {\n    getCategories: () => apiClient.get('/public/categories'),\n    getProducts: (params) => apiClient.get('/public/products', { params }),\n    getProduct: (slug) => apiClient.get(`/public/products/${slug}`),\n    getFeatured: (params) => apiClient.get('/public/featured', { params }),\n    getStats: () => apiClient.get('/public/stats'),\n  },\n};\n\nexport default apiClient;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}